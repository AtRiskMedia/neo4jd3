{"version":3,"file":"neo4jd3.js","names":["d3","Neo4jD3","selector","_options","container","graph","node","nodes","relationship","relationships","simulation","svg","options","arrowSize","colors","neo4jData","undefined","neo4jDataUrl","VERSION","init","version","color","length","Math","random","defaultColor","defaultEdgeColor","merge","target","source","Object","keys","forEach","property","contains","array","id","filter","elem","size","neo4jDataToD3Data","data","results","result","push","startNode","endNode","sort","a","b","i","linknum","_types","links","Array","from","Set","map","d","type","linkArc","r","hypot","x","y","drag","dragstarted","event","active","alphaTarget","restart","fx","fy","dragged","dragended","on","hasOwnProperty","select","attr","html","types","append","selectAll","join","forceSimulation","force","forceManyBody","strength","forceLink","forceCenter","parentElement","clientWidth","clientHeight","link","URL","location","call","text","labels","clone","lower"],"sources":["../src/scripts/neo4jd3.js"],"sourcesContent":["/* global d3, document */\n/* jshint latedef:nofunc */\n\"use strict\";\n\nimport * as d3 from \"d3\";\n\nexport default function Neo4jD3(selector, _options) {\n  var container,\n    graph,\n    node,\n    nodes,\n    relationship,\n    relationships,\n    selector,\n    simulation,\n    svg,\n    options = {\n      arrowSize: 6,\n      colors: colors(),\n      neo4jData: undefined,\n      neo4jDataUrl: undefined,\n    },\n    VERSION = \"0.1.0\";\n\n  init(selector, _options);\n\n  function version() {\n    return VERSION;\n  }\n\n  function colors() {\n    // oneDark inspired by distrotube (dt)\n    return [\n      \"#1c1f24\", // black\n      \"#ff6c6b\", // red\n      \"#98be65\", // green\n      \"#da8548\", // yellow\n      \"#51afef\", // blue\n      \"#c678dd\", // magenta\n      \"#5699af\", // cyan\n      \"#a7b1b7\", // white\n      \"#5b6268\", // brighter black\n      \"#da8548\", // brighter red\n      \"#4db5bd\", // brighter green\n      \"#ecbe7b\", // brighter yellow\n      \"#3071db\", // brighter blue\n      \"#a9a1e1\", // brighter magenta\n      \"#46d9ff\", // brighter cyan\n      \"#dfdfdf\", // brighter white\n    ];\n  }\n\n  function color() {\n    return options.colors[(options.colors.length * Math.random()) << 0];\n  }\n  function defaultColor() {\n    return options.colors[4];\n  }\n  function defaultEdgeColor() {\n    return options.colors[12];\n  }\n\n  function merge(target, source) {\n    Object.keys(source).forEach(function (property) {\n      target[property] = source[property];\n    });\n  }\n\n  function contains(array, id) {\n    var filter = array.filter(function (elem) {\n      return elem.id === id;\n    });\n    return filter.length > 0;\n  }\n\n  function size() {\n    return {\n      nodes: nodes.length,\n      relationships: relationships.length,\n    };\n  }\n\n  function neo4jDataToD3Data(data) {\n    var graph = {\n      nodes: [],\n      relationships: [],\n    };\n    data.results.forEach(function (result) {\n      result.data.forEach(function (data) {\n        data.graph.nodes.forEach(function (node) {\n          if (!contains(graph.nodes, node.id)) {\n            graph.nodes.push(node);\n          }\n        });\n        data.graph.relationships.forEach(function (relationship) {\n          relationship.source = relationship.startNode;\n          relationship.target = relationship.endNode;\n          graph.relationships.push(relationship);\n        });\n        data.graph.relationships.sort(function (a, b) {\n          if (a.source > b.source) {\n            return 1;\n          } else if (a.source < b.source) {\n            return -1;\n          } else {\n            if (a.target > b.target) {\n              return 1;\n            }\n            if (a.target < b.target) {\n              return -1;\n            } else {\n              return 0;\n            }\n          }\n        });\n        for (var i = 0; i < data.graph.relationships.length; i++) {\n          if (\n            i !== 0 &&\n            data.graph.relationships[i].source ===\n              data.graph.relationships[i - 1].source &&\n            data.graph.relationships[i].target ===\n              data.graph.relationships[i - 1].target\n          ) {\n            data.graph.relationships[i].linknum =\n              data.graph.relationships[i - 1].linknum + 1;\n          } else {\n            data.graph.relationships[i].linknum = 1;\n          }\n        }\n      });\n    });\n    return graph;\n  }\n\n  function _types(links) {\n    return Array.from(new Set(links.map((d) => d.type)));\n  }\n\n  function linkArc(d) {\n    const r = Math.hypot(d.target.x - d.source.x, d.target.y - d.source.y);\n    return `\n    M${d.source.x},${d.source.y}\n    A${r},${r} 0 0,1 ${d.target.x},${d.target.y}\n  `;\n  }\n\n  function drag(simulation) {\n    function dragstarted(event, d) {\n      if (!event.active) simulation.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    }\n\n    function dragged(event, d) {\n      d.fx = event.x;\n      d.fy = event.y;\n    }\n\n    function dragended(event, d) {\n      if (!event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    }\n\n    return d3\n      .drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended);\n  }\n\n  function init(selector, _options) {\n    merge(options, _options);\n    if (options.hasOwnProperty(\"neo4jData\")) {\n      const data = neo4jDataToD3Data(options.neo4jData);\n      const container = d3.select(selector);\n      container.attr(\"class\", \"neo4jd3\").html(\"\");\n      const links = data.relationships;\n      const nodes = data.nodes;\n      const types = _types(links);\n      const svg = container\n        .append(\"svg\")\n        .attr(\"width\", \"100%\")\n        .attr(\"height\", \"100%\")\n        .attr(\"class\", \"neo4jd3-graph\");\n      svg\n        .append(\"defs\")\n        .selectAll(\"marker\")\n        .data(types)\n        .join(\"marker\")\n        .attr(\"id\", (d) => `arrow-${d}`)\n        .attr(\"viewBox\", \"0 -5 10 10\")\n        .attr(\"refX\", 15)\n        .attr(\"refY\", -0.5)\n        .attr(\"markerWidth\", 6)\n        .attr(\"markerHeight\", 6)\n        .attr(\"orient\", \"auto\")\n        .append(\"path\")\n        .attr(\"fill\", defaultEdgeColor())\n        .attr(\"d\", \"M0,-5L10,0L0,5\");\n\n      const simulation = d3\n        .forceSimulation(nodes)\n        .force(\"charge\", d3.forceManyBody().strength(-50))\n        .force(\n          \"link\",\n          d3.forceLink(links).id(function (d) {\n            return d.id;\n          })\n        )\n        .force(\n          \"center\",\n          d3.forceCenter(\n            svg.node().parentElement.parentElement.clientWidth / 2,\n            svg.node().parentElement.parentElement.clientHeight / 2\n          )\n        );\n\n      const link = svg\n        .append(\"g\")\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke-width\", 1.5)\n        .selectAll(\"path\")\n        .data(links)\n        .join(\"path\")\n        .attr(\"stroke\", (d) => defaultEdgeColor())\n        .attr(\n          \"marker-end\",\n          (d) => `url(${new URL(`#arrow-${d.type}`, location)})`\n        );\n      const node = svg\n        .append(\"g\")\n        .attr(\"fill\", \"currentColor\")\n        .attr(\"stroke-linecap\", \"round\")\n        .attr(\"stroke-linejoin\", \"round\")\n        .attr(\"cursor\", \"pointer\")\n        .selectAll(\"g\")\n        .data(nodes)\n        .join(\"g\")\n        .call(drag(simulation));\n      node\n        .append(\"circle\")\n        .attr(\"stroke\", \"white\")\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"r\", 4);\n      node\n        .append(\"text\")\n        .attr(\"x\", 8)\n        .attr(\"y\", \"0.21em\")\n        .text((d) => d.labels.hasOwnProperty(\"0\") && d.labels[0])\n        .clone(true)\n        .lower()\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"white\")\n        .attr(\"stroke-width\", 3);\n\n      simulation.on(\"tick\", function () {\n        link.attr(\"d\", linkArc);\n        node.attr(\"transform\", (d) => `translate(${d.x},${d.y})`);\n      });\n    }\n  }\n\n  return {\n    neo4jDataToD3Data: neo4jDataToD3Data,\n    size: size,\n    version: version,\n  };\n}\n"],"mappings":"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"}