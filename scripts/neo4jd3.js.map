{"version":3,"file":"neo4jd3.js","names":["d3","Neo4jD3","selector","_options","container","graph","info","node","nodes","relationship","relationshipOutline","relationshipOverlay","relationshipText","relationships","simulation","svg","svgNodes","svgRelationships","svgScale","svgTranslate","classes2colors","justLoaded","numClasses","options","arrowSize","colors","neo4jData","undefined","neo4jDataUrl","VERSION","init","version","merge","target","source","Object","keys","forEach","property","color","length","Math","random","contains","array","id","filter","elem","size","neo4jDataToD3Data","data","results","result","push","startNode","endNode","sort","a","b","i","linknum","_types","links","Array","from","Set","map","d","type","linkArc","r","hypot","x","y","drag","dragstarted","event","active","alphaTarget","restart","fx","fy","dragged","dragended","on","randomD3Data","maxNodesToGenerate","label","numNodes","s","labels","properties","toUpperCase","Date","now","hasOwnProperty","select","attr","html","types","append","selectAll","join","forceSimulation","force","forceManyBody","strength","forceLink","forceCenter","parentElement","clientWidth","clientHeight","link","URL","location","call","text","clone","lower"],"sources":["../src/scripts/neo4jd3.js"],"sourcesContent":["/* global d3, document */\n/* jshint latedef:nofunc */\n\"use strict\";\n\nimport * as d3 from \"d3\";\n\nexport default function Neo4jD3(selector, _options) {\n  var container,\n    graph,\n    info,\n    node,\n    nodes,\n    relationship,\n    relationshipOutline,\n    relationshipOverlay,\n    relationshipText,\n    relationships,\n    selector,\n    simulation,\n    svg,\n    svgNodes,\n    svgRelationships,\n    svgScale,\n    svgTranslate,\n    classes2colors = {},\n    justLoaded = false,\n    numClasses = 0,\n    options = {\n      arrowSize: 6,\n      colors: colors(),\n      neo4jData: undefined,\n      neo4jDataUrl: undefined,\n    },\n    VERSION = \"0.1.0\";\n\n  init(selector, _options);\n\n  function version() {\n    return VERSION;\n  }\n\n  function merge(target, source) {\n    Object.keys(source).forEach(function (property) {\n      target[property] = source[property];\n    });\n  }\n\n  function colors() {\n    // oneDark inspired by distrotube (dt)\n    return [\n      \"#1c1f24\", // black\n      \"#ff6c6b\", // red\n      \"#98be65\", // green\n      \"#da8548\", // yellow\n      \"#51afef\", // blue\n      \"#c678dd\", // magenta\n      \"#5699af\", // cyan\n      \"#a7b1b7\", // white\n      \"#5b6268\", // brighter black\n      \"#da8548\", // brighter red\n      \"#4db5bd\", // brighter green\n      \"#ecbe7b\", // brighter yellow\n      \"#3071db\", // brighter blue\n      \"#a9a1e1\", // brighter magenta\n      \"#46d9ff\", // brighter cyan\n      \"#dfdfdf\", // brighter white\n    ];\n  }\n\n  function color() {\n    return options.colors[(options.colors.length * Math.random()) << 0];\n  }\n\n  function contains(array, id) {\n    var filter = array.filter(function (elem) {\n      return elem.id === id;\n    });\n    return filter.length > 0;\n  }\n\n  function size() {\n    return {\n      nodes: nodes.length,\n      relationships: relationships.length,\n    };\n  }\n\n  function neo4jDataToD3Data(data) {\n    var graph = {\n      nodes: [],\n      relationships: [],\n    };\n    data.results.forEach(function (result) {\n      result.data.forEach(function (data) {\n        data.graph.nodes.forEach(function (node) {\n          if (!contains(graph.nodes, node.id)) {\n            graph.nodes.push(node);\n          }\n        });\n        data.graph.relationships.forEach(function (relationship) {\n          relationship.source = relationship.startNode;\n          relationship.target = relationship.endNode;\n          graph.relationships.push(relationship);\n        });\n        data.graph.relationships.sort(function (a, b) {\n          if (a.source > b.source) {\n            return 1;\n          } else if (a.source < b.source) {\n            return -1;\n          } else {\n            if (a.target > b.target) {\n              return 1;\n            }\n            if (a.target < b.target) {\n              return -1;\n            } else {\n              return 0;\n            }\n          }\n        });\n        for (var i = 0; i < data.graph.relationships.length; i++) {\n          if (\n            i !== 0 &&\n            data.graph.relationships[i].source ===\n              data.graph.relationships[i - 1].source &&\n            data.graph.relationships[i].target ===\n              data.graph.relationships[i - 1].target\n          ) {\n            data.graph.relationships[i].linknum =\n              data.graph.relationships[i - 1].linknum + 1;\n          } else {\n            data.graph.relationships[i].linknum = 1;\n          }\n        }\n      });\n    });\n    return graph;\n  }\n\n  function _types(links) {\n    return Array.from(new Set(links.map((d) => d.type)));\n  }\n\n  function linkArc(d) {\n    const r = Math.hypot(d.target.x - d.source.x, d.target.y - d.source.y);\n    return `\n    M${d.source.x},${d.source.y}\n    A${r},${r} 0 0,1 ${d.target.x},${d.target.y}\n  `;\n  }\n\n  function drag(simulation) {\n    function dragstarted(event, d) {\n      if (!event.active) simulation.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    }\n\n    function dragged(event, d) {\n      d.fx = event.x;\n      d.fy = event.y;\n    }\n\n    function dragended(event, d) {\n      if (!event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    }\n\n    return d3\n      .drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended);\n  }\n\n  function randomD3Data(d, maxNodesToGenerate) {\n    var data = {\n        nodes: [],\n        relationships: [],\n      },\n      i,\n      label,\n      node,\n      numNodes = ((maxNodesToGenerate * Math.random()) << 0) + 1,\n      relationship,\n      s = size();\n    for (i = 0; i < numNodes; i++) {\n      label = \"Testing\";\n\n      node = {\n        id: s.nodes + 1 + i,\n        labels: [label],\n        properties: {\n          random: label,\n        },\n        x: d.x,\n        y: d.y,\n      };\n      data.nodes[data.nodes.length] = node;\n      relationship = {\n        id: s.relationships + 1 + i,\n        type: label.toUpperCase(),\n        startNode: d.id,\n        endNode: s.nodes + 1 + i,\n        properties: {\n          from: Date.now(),\n        },\n        source: d.id,\n        target: s.nodes + 1 + i,\n        linknum: s.relationships + 1 + i,\n      };\n      data.relationships[data.relationships.length] = relationship;\n    }\n    return data;\n  }\n\n  function init(selector, _options) {\n    merge(options, _options);\n    if (options.hasOwnProperty(\"neo4jData\")) {\n      const data = neo4jDataToD3Data(options.neo4jData);\n      const container = d3.select(selector);\n      container.attr(\"class\", \"neo4jd3\").html(\"\");\n\n      const links = data.relationships;\n      const nodes = data.nodes;\n      const types = _types(links);\n\n      const svg = container\n        .append(\"svg\")\n        .attr(\"width\", \"100%\")\n        .attr(\"height\", \"100%\")\n        .attr(\"class\", \"neo4jd3-graph\");\n      svg\n        .append(\"defs\")\n        .selectAll(\"marker\")\n        .data(types)\n        .join(\"marker\")\n        .attr(\"id\", (d) => `arrow-${d}`)\n        .attr(\"viewBox\", \"0 -5 10 10\")\n        .attr(\"refX\", 15)\n        .attr(\"refY\", -0.5)\n        .attr(\"markerWidth\", 6)\n        .attr(\"markerHeight\", 6)\n        .attr(\"orient\", \"auto\")\n        .append(\"path\")\n        .attr(\"fill\", color)\n        .attr(\"d\", \"M0,-5L10,0L0,5\");\n\n      const simulation = d3\n        .forceSimulation(nodes)\n        .force(\"charge\", d3.forceManyBody().strength(-400))\n        .force(\n          \"link\",\n          d3.forceLink(links).id(function (d) {\n            return d.id;\n          })\n        )\n        .force(\n          \"center\",\n          d3.forceCenter(\n            svg.node().parentElement.parentElement.clientWidth / 2,\n            svg.node().parentElement.parentElement.clientHeight / 2\n          )\n        );\n\n      const link = svg\n        .append(\"g\")\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke-width\", 1.5)\n        .selectAll(\"path\")\n        .data(links)\n        .join(\"path\")\n        .attr(\"stroke\", (d) => color(d.type))\n        .attr(\n          \"marker-end\",\n          (d) => `url(${new URL(`#arrow-${d.type}`, location)})`\n        );\n\n      const node = svg\n        .append(\"g\")\n        .attr(\"fill\", \"currentColor\")\n        .attr(\"stroke-linecap\", \"round\")\n        .attr(\"stroke-linejoin\", \"round\")\n        .selectAll(\"g\")\n        .data(nodes)\n        .join(\"g\")\n        .call(drag(simulation));\n      node\n        .append(\"circle\")\n        .attr(\"stroke\", \"white\")\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"r\", 4);\n      node\n        .append(\"text\")\n        .attr(\"x\", 8)\n        .attr(\"y\", \"0.31em\")\n        .text((d) => d.id)\n        .clone(true)\n        .lower()\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"white\")\n        .attr(\"stroke-width\", 3);\n\n      simulation.on(\"tick\", function () {\n        link.attr(\"d\", linkArc);\n        node.attr(\"transform\", (d) => `translate(${d.x},${d.y})`);\n      });\n    }\n  }\n\n  return {\n    neo4jDataToD3Data: neo4jDataToD3Data,\n    randomD3Data: randomD3Data,\n    size: size,\n    version: version,\n  };\n}\n"],"mappings":"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"}